#!/bin/bash
# ================================================================================================
# winhost - Windows Hosts Manager via WSL
# ================================================================================================

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
WINHOSTCTL_DIR="$(cd "$SCRIPT_DIR/.." && pwd)"

source "$WINHOSTCTL_DIR/.env"
source "$WINHOSTCTL_DIR/lib/functions"

action="$1"
shift

case "$action" in
  --add)
    domain="$1"
    shift
    ip="${1:-$DEFAULT_IP_ADDRESS}"
    addhost --domain "$domain" --ip "$ip"
    ;;
  --remove)
    domain="$1"
    removehost --domain "$domain"
    ;;
  --help|-h)
    echo "Usage:"
    echo "  hostwin --add <domain> [ip]"
    echo "  hostwin --remove <domain>"
    ;;
  *)
    echo "âŒ Unknown action: $action"
    echo "Use --help for usage." >&2
    exit 1
    ;;
esac
